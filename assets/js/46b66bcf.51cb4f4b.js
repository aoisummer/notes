"use strict";(self.webpackChunkdocusaurus_demo=self.webpackChunkdocusaurus_demo||[]).push([[750],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var m=n.createContext({}),o=function(e){var t=n.useContext(m),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=o(e.components);return n.createElement(m.Provider,{value:t},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,m=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),s=o(a),k=r,c=s["".concat(m,".").concat(k)]||s[k]||d[k]||l;return a?n.createElement(c,i(i({ref:t},u),{},{components:a})):n.createElement(c,i({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=k;var p={};for(var m in t)hasOwnProperty.call(t,m)&&(p[m]=t[m]);p.originalType=e,p[s]="string"==typeof e?e:r,i[1]=p;for(var o=2;o<l;o++)i[o]=a[o];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},8650:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>o});var n=a(7462),r=(a(7294),a(3905));const l={},i="Web \u76d1\u63a7\u89c6\u9891\u7684\u4e32\u6d41\u65b9\u6848",p={unversionedId:"multimedia/web-surveillance-video-streaming-solution",id:"multimedia/web-surveillance-video-streaming-solution",title:"Web \u76d1\u63a7\u89c6\u9891\u7684\u4e32\u6d41\u65b9\u6848",description:"\u5728\u542b\u6709\u89c6\u9891\u76d1\u63a7\u7684\u9879\u76ee\u4e2d\uff0c\u5728 Web \u7aef\u89c2\u770b\u662f\u4e00\u4e2a\u4e0d\u7b97\u5c11\u89c1\u7684\u9700\u6c42\u3002\u4e00\u822c\u6765\u8bf4\u786c\u4ef6\u5382\u5546\u4f1a\u81ea\u5e26\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e4b\u7c7b\u7684\u754c\u9762\u7528\u4e8e\u7b80\u6613\u89c2\u770b\uff0c\u4f46\u8fdb\u884c Web \u5f00\u53d1\u65f6\u90fd\u4f1a\u8fdb\u884c\u989d\u5916\u5b9a\u5236\u3002",source:"@site/docs/multimedia/web-surveillance-video-streaming-solution.md",sourceDirName:"multimedia",slug:"/multimedia/web-surveillance-video-streaming-solution",permalink:"/notes/multimedia/web-surveillance-video-streaming-solution",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u7b80\u4ecb",permalink:"/notes/"},next:{title:"\u5e38\u7528\u8f6f\u4ef6",permalink:"/notes/os/software"}},m={},o=[{value:"\u524d\u8a00",id:"foreword",level:2},{value:"\u51c6\u5907",id:"\u51c6\u5907",level:2},{value:"\u6d41\u5a92\u4f53\u534f\u8bae",id:"streaming-protocol",level:2},{value:"RTSP",id:"rtsp",level:3},{value:"RTMP",id:"rtmp",level:3},{value:"HLS",id:"hls",level:3},{value:"WebRTC",id:"webrtc",level:3},{value:"\u6280\u672f\u9009\u62e9",id:"tech-choice",level:2},{value:"\u57fa\u4e8e HLS",id:"based-on-hls",level:3},{value:"\u57fa\u4e8e WebRTC",id:"based-on-webrtc",level:3},{value:"\u57fa\u4e8e WHEP",id:"based-on-whep",level:3},{value:"\u57fa\u4e8e WebSocket",id:"based-on-websocket",level:3},{value:"\u5176\u5b83\u65b9\u6848",id:"other",level:2},{value:"WebRTC-Streamer",id:"webrtc-streamer",level:3},{value:"\u603b\u7ed3",id:"conclusion",level:2}],u={toc:o},s="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(s,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"web-\u76d1\u63a7\u89c6\u9891\u7684\u4e32\u6d41\u65b9\u6848"},"Web \u76d1\u63a7\u89c6\u9891\u7684\u4e32\u6d41\u65b9\u6848"),(0,r.kt)("p",null,"\u5728\u542b\u6709\u89c6\u9891\u76d1\u63a7\u7684\u9879\u76ee\u4e2d\uff0c\u5728 Web \u7aef\u89c2\u770b\u662f\u4e00\u4e2a\u4e0d\u7b97\u5c11\u89c1\u7684\u9700\u6c42\u3002\u4e00\u822c\u6765\u8bf4\u786c\u4ef6\u5382\u5546\u4f1a\u81ea\u5e26\u4e00\u4e2a\u5ba2\u6237\u7aef\u4e4b\u7c7b\u7684\u754c\u9762\u7528\u4e8e\u7b80\u6613\u89c2\u770b\uff0c\u4f46\u8fdb\u884c Web \u5f00\u53d1\u65f6\u90fd\u4f1a\u8fdb\u884c\u989d\u5916\u5b9a\u5236\u3002"),(0,r.kt)("p",null,"\u5382\u5546\u5bf9\u4e8e\u8bbe\u5907\u7684\u6d41\u5a92\u4f53\u4f20\u8f93\u4e00\u822c\u53ea\u652f\u6301 RTSP\uff0c\u65e9\u671f\u90fd\u662f\u63d0\u4f9b ActiveX \u63a7\u4ef6\u6216 NPAPI \u63d2\u4ef6\uff0c\u4f46\u524d\u8005\u5df2\u968f\u7740 IE \u7684\u505c\u6b62\u652f\u6301\u800c\u9010\u6e10\u4e0d\u88ab\u64cd\u4f5c\u7cfb\u7edf\u652f\u6301\uff0c\u540e\u8005\u5219\u662f\u56e0\u5b89\u5168\u95ee\u9898\u88ab Chrome \u7b49\u653e\u5f03\u3002\u8fd9\u610f\u5473\u7740\u6d4f\u89c8\u5668\u7aef\u5df2\u6ca1\u6709\u4efb\u4f55\u76f4\u63a5\u652f\u6301\u8be5\u534f\u8bae\u7684\u624b\u6bb5\uff08\u8ba9\u7528\u6237\u76f4\u8fde\u8bbe\u5907\u4e5f\u6709\u70b9\u5b89\u5168\u6027\u95ee\u9898\uff09\uff0c\u4e8e\u662f\u9700\u8981\u627e\u5230\u4e00\u4e9b\u65b9\u6848\u7528\u4e8e\u89e3\u51b3\u7528\u6237\u89c2\u770b\u7684\u95ee\u9898\u3002"),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"\u672c\u6587\u7684\u64cd\u4f5c\u4ee5 Windows \u7cfb\u7edf\u4e3a\u4e3b\uff0c\u4f46\u4f7f\u7528\u7684\u5de5\u5177\u57fa\u672c\u90fd\u662f\u8de8\u5e73\u53f0\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u65b9\u4fbf\u5730\u5728\u5176\u5b83\u7cfb\u7edf\u4e0a\u590d\u73b0\u3002")),(0,r.kt)("h2",{id:"foreword"},"\u524d\u8a00"),(0,r.kt)("p",null,"\u672c\u5904\u4e0d\u4f1a\u8be6\u7ec6\u8bb2\u89e3\u6bcf\u4e2a\u6982\u5ff5\uff0c\u4f46\u4f1a\u5217\u51fa\u4e00\u4e9b\u7ecf\u5e38\u88ab\u8bef\u89e3\u548c\u6df7\u6dc6\u7684\u6982\u5ff5\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u89c6\u9891\u683c\u5f0f"),"\uff1a\u901a\u8fc7\u538b\u7f29\u6280\u672f\u5c06\u89c6\u9891\u539f\u59cb\u6570\u636e\u4e2d\u7684\u5197\u4f59\u4fe1\u606f\u53bb\u9664\uff0c\u964d\u4f4e\u6570\u636e\u5927\u5c0f\u4ee5\u4fbf\u4f20\u8f93\u4e0e\u5b58\u50a8",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"H.264\uff08MPEG-4 AVC\uff09"),(0,r.kt)("li",{parentName:"ul"},"H.265\uff08MPEG-H HEVC\uff09"),(0,r.kt)("li",{parentName:"ul"},"AV1"),(0,r.kt)("li",{parentName:"ul"},"VP9"),(0,r.kt)("li",{parentName:"ul"},"RealVideo"),(0,r.kt)("li",{parentName:"ul"},"Xvid"),(0,r.kt)("li",{parentName:"ul"},"VC-1"),(0,r.kt)("li",{parentName:"ul"},"Windows Media Video"),(0,r.kt)("li",{parentName:"ul"},"Apple Video\uff08QuickTime Video\uff09"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u89c6\u9891\u7f16\u7801\u5668"),"\uff1a\u5b9e\u73b0\u4e0a\u8ff0\u683c\u5f0f\u7684\u5de5\u5177",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"FFmpeg"),(0,r.kt)("li",{parentName:"ul"},"x264"),(0,r.kt)("li",{parentName:"ul"},"x265"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u97f3\u9891\u683c\u5f0f"),"\uff1a\u901a\u8fc7\u538b\u7f29\u6280\u672f\u5c06\u97f3\u9891\u539f\u59cb\u6570\u636e\u4e2d\u7684\u5197\u4f59\u4fe1\u606f\u53bb\u9664\uff0c\u964d\u4f4e\u6570\u636e\u5927\u5c0f\u4ee5\u4fbf\u4f20\u8f93\u4e0e\u5b58\u50a8",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"MP3"),(0,r.kt)("li",{parentName:"ul"},"AAC"),(0,r.kt)("li",{parentName:"ul"},"Opus"),(0,r.kt)("li",{parentName:"ul"},"AC-3"),(0,r.kt)("li",{parentName:"ul"},"ALAC"),(0,r.kt)("li",{parentName:"ul"},"FLAC"),(0,r.kt)("li",{parentName:"ul"},"Monkey's Audio"),(0,r.kt)("li",{parentName:"ul"},"WavPack"),(0,r.kt)("li",{parentName:"ul"},"Windows Media Audio"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u97f3\u9891\u7f16\u7801\u5668"),"\uff1a\u5b9e\u73b0\u4e0a\u8ff0\u683c\u5f0f\u7684\u5de5\u5177",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"FFmpeg"),(0,r.kt)("li",{parentName:"ul"},"LAME"),(0,r.kt)("li",{parentName:"ul"},"Apple AAC"),(0,r.kt)("li",{parentName:"ul"},"FDK AAC"),(0,r.kt)("li",{parentName:"ul"},"Nero AAC"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5bb9\u5668"),"\uff1a\u5c06\u97f3\u89c6\u9891\uff08\u4e5f\u53ef\u80fd\u542b\u5b57\u5e55\u7b49\u5176\u5b83\u6570\u636e\uff09\u5305\u88c5\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u4ee5\u65b9\u4fbf\u64ad\u653e",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"MP4\uff08MPEG-4 Part 14\uff09"),(0,r.kt)("li",{parentName:"ul"},"TS\uff08MPEG-TS\uff09"),(0,r.kt)("li",{parentName:"ul"},"MPG\uff08MPEG-PS\uff09"),(0,r.kt)("li",{parentName:"ul"},"AVI"),(0,r.kt)("li",{parentName:"ul"},"Matroska\u3001WebM"),(0,r.kt)("li",{parentName:"ul"},"Ogg"),(0,r.kt)("li",{parentName:"ul"},"RealMedia"),(0,r.kt)("li",{parentName:"ul"},"Flash Video"),(0,r.kt)("li",{parentName:"ul"},"VOB"),(0,r.kt)("li",{parentName:"ul"},"MOV\uff08QuickTime\uff09"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\u5bb9\u5668\u5de5\u5177"),"\uff1a\u5b9e\u73b0\u4e0a\u8ff0\u683c\u5f0f\u7684\u5de5\u5177",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"FFmpeg"),(0,r.kt)("li",{parentName:"ul"},"VirtualDub"),(0,r.kt)("li",{parentName:"ul"},"MP4Box"),(0,r.kt)("li",{parentName:"ul"},"MKVToolNix"),(0,r.kt)("li",{parentName:"ul"},"HandBrake")))),(0,r.kt)("h2",{id:"\u51c6\u5907"},"\u51c6\u5907"),(0,r.kt)("p",null,"\u9274\u4e8e\u4e0d\u662f\u968f\u65f6\u90fd\u80fd\u627e\u5230\u4e00\u4e2a\u8bbe\u5907\u8fdb\u884c\u8c03\u8bd5\uff0c\u56e0\u6b64\u51c6\u5907\u4e00\u4e2a\u672c\u5730\u7684 RTSP \u6e90\u6bd4\u8f83\u65b9\u4fbf\uff0c\u8fd9\u91cc\u4f1a\u7528\u5230\u672c\u6587\u7684\u4e3b\u8981\u5de5\u5177 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/bluenviron/mediamtx"},"MediaMTX")," \u4f5c\u4e3a RTSP \u670d\u52a1\u5668\u7aef\u3002"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5728 Linux \u4e0b\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,r.kt)("a",{parentName:"p",href:"https://gstreamer.freedesktop.org/"},"GStreamer")," \u4f5c\u4e3a RTSP \u670d\u52a1\u5668\u7aef\u3002")),(0,r.kt)("p",null,"\u8be5\u670d\u52a1\u5668\u7aef\u9ed8\u8ba4\u7684 RTSP \u7aef\u53e3\u4e3a 8554\uff0c\u51c6\u5907\u4e00\u4e2a\u5e38\u89c1\u683c\u5f0f\u7684 MP4 \u6587\u4ef6\u5982 ",(0,r.kt)("inlineCode",{parentName:"p"},"input.mp4")," \u4f5c\u4e3a\u201c\u76f4\u64ad\u6e90\u201d\uff0c\u4f7f\u7528 FFmpeg \u5faa\u73af\u63a8\u9001\u5230\u8be5\u670d\u52a1\u5668\u7aef\u4e0a\u4ee5\u53d1\u5e03\u8be5\u6e90\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"ffmpeg -re -stream_loop -1 -i input.mp4 -vcodec libx264 -s 854x480 -b:v 1000k -bf 0 -an -f rtsp rtsp://127.0.0.1:8554/mystream\n")),(0,r.kt)("p",null,"\u4f60\u53ef\u4ee5\u67e5\u9605 FFmpeg \u5e2e\u52a9\u4fee\u6539\u53c2\u6570\u4ee5\u7b26\u5408\u4f60\u7684\u9700\u6c42\u3002"),(0,r.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u6709\u4e86\u4e00\u4e2a RTSP \u6e90\uff0c\u5730\u5740\u662f ",(0,r.kt)("inlineCode",{parentName:"p"},"rtsp://127.0.0.1:8554/mystream"),"\uff0c\u4e3a\u4e86\u6d4b\u8bd5\u8be5\u5730\u5740\u662f\u5426\u751f\u6548\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u652f\u6301\u7684\u5ba2\u6237\u7aef\u6253\u5f00\u8be5\u5730\u5740\u8fdb\u884c\u64ad\u653e\uff0c\u4f8b\u5982\uff1aVLC\u3001PotPlayer \u7b49\u3002"),(0,r.kt)("h2",{id:"streaming-protocol"},"\u6d41\u5a92\u4f53\u534f\u8bae"),(0,r.kt)("p",null,"\u8fd9\u662f\u4e00\u79cd\u5c06\u591a\u5a92\u4f53\u6570\u636e\u5206\u6bb5\u538b\u7f29\u540e\uff0c\u901a\u8fc7\u7f51\u7edc\u5b9e\u65f6\u53d1\u9001\u4ee5\u4f9b\u7528\u6237\u89c2\u770b\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002\u5e38\u89c1\u7684\u534f\u8bae\u6709\uff1a"),(0,r.kt)("h3",{id:"rtsp"},(0,r.kt)("a",{parentName:"h3",href:"https://zh.wikipedia.org/wiki/%E5%8D%B3%E6%99%82%E4%B8%B2%E6%B5%81%E5%8D%94%E5%AE%9A"},"RTSP")),(0,r.kt)("p",null,"\u65e9\u671f\u7684\u5b9e\u73b0\u6807\u51c6\uff0c\u6709\u5927\u91cf\u5ba2\u6237\u7aef\u652f\u6301\uff0c\u4f46\u6d4f\u89c8\u5668\u5747\u4e0d\u652f\u6301\u3002"),(0,r.kt)("h3",{id:"rtmp"},(0,r.kt)("a",{parentName:"h3",href:"https://zh.wikipedia.org/wiki/%E5%AE%9E%E6%97%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE"},"RTMP")),(0,r.kt)("p",null,"\u7531 Macromedia\uff08\u540e\u4e3a Adobe\uff09\u4e3a Flash \u5f00\u53d1\u7684\u4e00\u4e2a\u4e13\u6709\u534f\u8bae\uff0c\u6d4f\u89c8\u5668\u9700\u8981 Flash \u63d2\u4ef6\u624d\u80fd\u652f\u6301\uff08Flash \u5df2\u88ab\u653e\u5f03\uff0c\u6d4f\u89c8\u5668\u4e5f\u9010\u6e10\u505c\u6b62\u5bf9\u5176\u7684\u652f\u6301\uff09\u3002"),(0,r.kt)("h3",{id:"hls"},(0,r.kt)("a",{parentName:"h3",href:"https://zh.wikipedia.org/wiki/HTTP_Live_Streaming"},"HLS")),(0,r.kt)("p",null,"\u7531\u82f9\u679c\u5f00\u53d1\uff0c\u57fa\u4e8e HTTP \u534f\u8bae\u7684\u5b9e\u73b0\uff0c\u5728\u79fb\u52a8\u7aef\u4e0a\u539f\u751f\u652f\u6301\u5ea6\u9ad8\u3002"),(0,r.kt)("h3",{id:"webrtc"},(0,r.kt)("a",{parentName:"h3",href:"https://zh.wikipedia.org/wiki/WebRTC"},"WebRTC")),(0,r.kt)("p",null,"\u8fd9\u672c\u6765\u662f\u4e00\u4e2a\u8bbe\u8ba1\u7528\u4e8e\u6d4f\u89c8\u5668\u7aef\u8fdb\u884c\u5b9e\u65f6\u8bed\u97f3\u3001\u89c6\u9891\u5bf9\u8bdd\u7684\u73b0\u4ee3 API\uff0c\u4f46\u4e5f\u53ef\u7528\u6765\u4f20\u8f93\u76f4\u64ad\u6d41\u3002"),(0,r.kt)("h2",{id:"tech-choice"},"\u6280\u672f\u9009\u62e9"),(0,r.kt)("p",null,"\u603b\u7ed3\u4e00\u4e0b\u4e0a\u9762\u7684\u534f\u8bae\u53ef\u4ee5\u5f97\u5230\u4e0b\u8868\uff1a"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u8bbe\u5907"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6d41\u5a92\u4f53\u534f\u8bae"),(0,r.kt)("th",{parentName:"tr",align:null},"\u4f20\u8f93\u534f\u8bae"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6e32\u67d3"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RTSP"),(0,r.kt)("td",{parentName:"tr",align:null},"RTSP\u3001RTMP"),(0,r.kt)("td",{parentName:"tr",align:null},"TCP"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6d4f\u89c8\u5668\u63d2\u4ef6")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"HLS"),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP"),(0,r.kt)("td",{parentName:"tr",align:null},"\u57fa\u4e8e\u6d4f\u89c8\u5668\u3001hls.js")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"WebRTC"),(0,r.kt)("td",{parentName:"tr",align:null},"TCP\u3001UDP"),(0,r.kt)("td",{parentName:"tr",align:null},"\u57fa\u4e8e\u6d4f\u89c8\u5668")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"-"),(0,r.kt)("td",{parentName:"tr",align:null},"WebSocket"),(0,r.kt)("td",{parentName:"tr",align:null},"jsmpeg\u3001flv.js")))),(0,r.kt)("p",null,"\u5176\u4e2d RTSP\u3001RTMP \u57fa\u672c\u4e0d\u88ab\u6d4f\u89c8\u5668\u652f\u6301\uff0c\u56e0\u6b64\u4e0d\u4e88\u9009\u62e9\u3002\u975e RTSP \u7684\u60c5\u51b5\uff0c\u9700\u8981\u4e00\u4e2a\u5a92\u4f53\u670d\u52a1\u5668\u7aef\u5bf9\u539f\u59cb\u534f\u8bae\u8fdb\u884c\u8f6c\u6362\u3001\u4ee3\u7406\u4e3a\u5176\u5b83\u534f\u8bae\u7c7b\u578b\uff0c\u5728\u524d\u9762\u7684\u51c6\u5907\u9636\u6bb5\u63d0\u5230\u7684 MediaMTX \u53ef\u4ee5\u5b8c\u6210\u8fd9\u9879\u4efb\u52a1\u3002\u5982\u679c\u4f60\u5df2\u6709\u4e00\u4e2a\u8bbe\u5907\u53ef\u4ee5\u7528\u4e8e\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u53c2\u8003\u5b83\u7684\u6587\u6863\u4fee\u6539\u914d\u7f6e\u6587\u4ef6 ",(0,r.kt)("inlineCode",{parentName:"p"},"mediamtx.yml")," \u52a0\u5165\u4f60\u7684\u8bbe\u5907\uff0c\u4f8b\u5982\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"paths:\n  mystream:\n    source: rtsp://abc:123@192.168.1.123:554/streaming\n")),(0,r.kt)("p",null,"\u9488\u5bf9\u540e\u51e0\u79cd\u60c5\u51b5\uff0c\u4e0b\u9762\u4f1a\u8fdb\u884c\u6d4b\u8bd5\u3002"),(0,r.kt)("h3",{id:"based-on-hls"},"\u57fa\u4e8e HLS"),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("a",{parentName:"p",href:"https://caniuse.com/http-live-streaming"},"\u67e5\u8be2"),"\u53ef\u4ee5\u53d1\u73b0\uff0c\u8be5\u534f\u8bae\u5bf9\u4e8e\u684c\u9762\u7aef\u7684\u539f\u751f\u652f\u6301\u4e0d\u597d\uff0c\u4f46\u5bf9\u4e8e\u975e\u539f\u751f\u652f\u6301\u7684\u6d4f\u89c8\u5668\u53ef\u4ee5\u901a\u8fc7 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/video-dev/hls.js"},"HLS.js")," \u5e93\u5b9e\u73b0\u64ad\u653e\uff0c\u4e0b\u9762\u4ee5\u8be5\u5e93\u4f5c\u4e3a\u64ad\u653e\u5668\u8fdb\u884c\u3002"),(0,r.kt)("p",null,"MediaMTX \u652f\u6301\u4ee5 HLS \u534f\u8bae\u8bbf\u95ee RTSP \u6e90\uff0c\u9ed8\u8ba4\u901a\u8fc7 8888 \u7aef\u53e3\u8bbf\u95ee\u8be5\u670d\u52a1\uff0c\u7f16\u8f91\u5982\u4e0b\u6587\u4ef6\u5373\u53ef\u8bbf\u95ee\u524d\u9762\u51c6\u5907\u7684\u6e90\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="hls.html"',title:'"hls.html"'},"<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <script src=\"https://unpkg.com/hls.js@1.4.8/dist/hls.min.js\"><\/script>\n  </head>\n  <body>\n    <video muted></video>\n    <script>\n      var video = document.querySelector('video');\n      var hls = new Hls();\n      hls.attachMedia(video);\n      hls.on(Hls.Events.MEDIA_ATTACHED, function () {\n        hls.loadSource('http://127.0.0.1:8888/mystream/index.m3u8');\n      });\n      video.play();\n    <\/script>\n  </body>\n</html>\n")),(0,r.kt)("p",null,"\u672c\u534f\u8bae\u5b9e\u65bd\u6bd4\u8f83\u65b9\u4fbf\uff0c\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\u4e5f\u8f83\u597d\uff0c\u4f46\u4e3b\u8981\u7f3a\u70b9\u662f\u5ef6\u8fdf\u8f83\u9ad8\uff0c\u5982\u679c\u5bf9\u5ef6\u8fdf\u65b9\u9762\u6709\u8981\u6c42\u5219\u672c\u65b9\u6848\u53ef\u80fd\u4e0d\u9002\u5408\u3002"),(0,r.kt)("h3",{id:"based-on-webrtc"},"\u57fa\u4e8e WebRTC"),(0,r.kt)("p",null,"\u4f5c\u4e3a\u4e00\u4e2a\u6bd4\u8f83\u65b0\u7684\u6807\u51c6\uff0cWebRTC \u7684",(0,r.kt)("a",{parentName:"p",href:"https://caniuse.com/rtcpeerconnection"},"\u517c\u5bb9\u6027"),"\u6bd4\u8d77 HLS \u6765\u8bf4\u8981\u5dee\u4e00\u70b9\u3002\u800c\u4e14\u8be5\u534f\u8bae\u5e76\u975e\u4e13\u95e8\u4e3a\u76f4\u64ad\u6d41\u8bbe\u8ba1\uff0c\u5927\u591a\u6570\u4e3a\u5e95\u5c42 API\uff0c\u9ad8\u5c42\u5c01\u88c5\u7684\u5e93\u8981\u4f9d\u636e\u5177\u4f53\u5b9e\u73b0\u800c\u5404\u81ea\u7f16\u5199\u3002"),(0,r.kt)("p",null,"MediaMTX \u4e5f\u652f\u6301\u4ee5 WebRTC \u65b9\u5f0f\u8bbf\u95ee RTSP \u6e90\uff0c\u9ed8\u8ba4\u901a\u8fc7 8889 \u7aef\u53e3\u8bbf\u95ee\u8be5\u670d\u52a1\uff0c\u7f16\u8f91\u5982\u4e0b\u6587\u4ef6\u5373\u53ef\u8bbf\u95ee\u524d\u9762\u51c6\u5907\u7684\u6e90\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="webrtc.html"',title:'"webrtc.html"'},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <script src="https://unpkg.com/webrtc-adapter@8.2.3/out/adapter.js"><\/script>\n  </head>\n  <body>\n    <iframe\n      width="854"\n      height="480"\n      style="border: 0;"\n      src="http://127.0.0.1:8889/mystream"\n    ></iframe>\n  </body>\n</html>\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u91cc\u5f15\u5165\u4e86 WebRTC adapter\uff0c\u7528\u4e8e\u89e3\u51b3\u5404\u6d4f\u89c8\u5668\u5bf9 WebRTC \u652f\u6301\u7684\u5dee\u5f02\u6027\u95ee\u9898\u3002")),(0,r.kt)("p",null,"\u6b64\u5904\u4ee5\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"iframe")," \u7684\u5f62\u5f0f\u5185\u90e8\u5d4c\u5165\u4e86\u4e00\u4e2a ",(0,r.kt)("inlineCode",{parentName:"p"},"video")," \u6807\u7b7e\uff0c\u5185\u90e8\u5c01\u88c5\u5e93\u7531\u5185\u7f6e\u5b9e\u73b0\uff0c\u5916\u90e8\u63a7\u5236\u4e0d\u65b9\u4fbf\uff0c\u4f46\u5927\u591a\u6570\u60c5\u51b5\u4e0b\u4ec5\u63d2\u5165\u8be5\u6807\u7b7e\u5373\u53ef\uff0c\u5b9e\u65bd\u65b9\u4fbf\uff0c\u5ef6\u8fdf\u4e5f\u8f83\u4f4e\u3002"),(0,r.kt)("h3",{id:"based-on-whep"},"\u57fa\u4e8e WHEP"),(0,r.kt)("p",null,"WHEP\uff08WebRTC HTTP Egress Protocol\uff09\u662f\u4e00\u4e2a\u5168\u65b0\u7684\u3001\u6269\u5c55\u81ea WebRTC \u7684\u534f\u8bae\u6807\u51c6\u8349\u6848\uff0c\u6539\u5584\u4e86\u524d\u9762\u63d0\u5230\u7684 WebRTC \u5168\u662f\u5e95\u5c42 API\uff0c\u6ca1\u6709\u9ad8\u5c42\u4fe1\u4ee4\u534f\u8bae\u7684\u95ee\u9898\u3002"),(0,r.kt)("p",null,"MediaMTX \u4e5f\u652f\u6301\u4ee5 WHEP \u65b9\u5f0f\u8bbf\u95ee RTSP \u6e90\uff0c\u7f16\u8f91\u5982\u4e0b\u6587\u4ef6\u5373\u53ef\u8bbf\u95ee\u524d\u9762\u51c6\u5907\u7684\u6e90\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="whep.html"',title:'"whep.html"'},"<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <script src=\"https://unpkg.com/webrtc-adapter@8.2.3/out/adapter.js\"><\/script>\n  </head>\n  <body>\n    <video autoplay muted></video>\n    <script type=\"module\">\n      import WHEPClient from 'https://fastly.jsdelivr.net/gh/cloudflare/workers-sdk@main/templates/stream/webrtc/src/WHEPClient.js';\n\n      const url = 'http://127.0.0.1:8889/mystream/whep';\n      const videoElement = document.querySelector('video');\n      const client = new WHEPClient(url, videoElement);\n    <\/script>\n  </body>\n</html>\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u8fd9\u91cc\u4f7f\u7528\u4e86\u7531 Cloudflare \u63d0\u4f9b\u7684 WHEP \u5ba2\u6237\u7aef\u5e93\uff0c\u4f60\u53ef\u4ee5\u4ece\u4ed6\u4eec\u7684 ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/cloudflare/workers-sdk/tree/main/templates/stream/webrtc/src"},"Github")," \u4e0a\u4e0b\u8f7d\u90a3\u4e9b\u6587\u4ef6\u7528\u4e8e\u672c\u5730\u90e8\u7f72\u3002")),(0,r.kt)("p",null,"\u672c\u65b9\u6848\u56e0\u4e3a\u662f\u57fa\u4e8e WebRTC\uff0c\u6240\u4ee5\u4f18\u70b9\u662f\u76f8\u540c\u7684\uff0c\u5b9e\u65bd\u4e5f\u6bd4\u8f83\u65b9\u4fbf\uff0c\u4f46\u7531\u4e8e\u662f\u65b0\u7684\u6807\u51c6\uff0c\u5177\u4f53\u517c\u5bb9\u6027\u8981\u8fdb\u884c\u5b9e\u9a8c\u624d\u80fd\u5f97\u77e5\u3002"),(0,r.kt)("h3",{id:"based-on-websocket"},"\u57fa\u4e8e WebSocket"),(0,r.kt)("p",null,"WebSocket \u867d\u7136\u4e0d\u662f\u6d41\u5a92\u4f53\u534f\u8bae\uff0c\u4f46\u5176\u5168\u53cc\u5de5\u7684\u901a\u4fe1\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u7528\u4e8e\u5411\u5ba2\u6237\u7aef\u63a8\u9001\u591a\u5a92\u4f53\u6570\u636e\u3002\u4e14\u7531\u4e8e\u826f\u597d\u7684\u6d4f\u89c8\u5668\u652f\u6301\u5ea6\uff0c\u4ee5\u53ca\u53ef\u4ee5\u4e0e HTTP \u590d\u7528\u7aef\u53e3\uff0c\u53ef\u4ee5\u7ed5\u8fc7\u524d\u9762\u7684\u90e8\u5206\u534f\u8bae\u4e2d\u5bf9\u9632\u706b\u5899\u9650\u5236\u7684\u9700\u6c42\u3002"),(0,r.kt)("p",null,"\u56e0\u4e3a\u6ca1\u6709\u5728\u5176\u4e4b\u4e0a\u7684\u6807\u51c6\uff0c\u6240\u4ee5\u670d\u52a1\u5668\u7aef\u5982\u4f55\u5b9e\u73b0\u5168\u51ed\u5f00\u53d1\u8005\u81ea\u884c\u51b3\u5b9a\uff0c\u4e5f\u5c31\u6ca1\u6709\u5bf9\u5e94\u7684\u6807\u51c6\u5e93\u53ef\u4ee5\u4f7f\u7528\uff0c\u4f46\u4e0b\u9762\u4e5f\u63d0\u4f9b\u4e00\u4e9b\u5b9e\u73b0\u65b9\u5f0f\u4ee5\u4f9b\u53c2\u8003\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/k-yle/rtsp-relay"},"RTSP Relay"),"\uff1a\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e Express \u7684\u670d\u52a1\u5668\u7aef\uff0c\u5185\u90e8\u4f7f\u7528\u4e86 FFmpeg \u8fdb\u884c\u8f6c\u7801\u4e3a MPEG-1 \u89c6\u9891\u683c\u5f0f\uff0c\u5728\u6d4f\u89c8\u5668\u7aef\u4f7f\u7528 jsmpeg \u64ad\u653e\u3002\u7f3a\u70b9\u662f MPEG-1 \u683c\u5f0f\u538b\u7f29\u7387\u592a\u4f4e\uff0c\u6bd4\u8f83\u5360\u7528\u5e26\u5bbd\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Bilibili/flv.js"},"flv.js"),"\uff1a\u672c\u6765\u662f\u4e00\u4e2a\u4e0d\u9700\u8981 Flash \u63d2\u4ef6\u652f\u6301\uff0c\u7528\u4e8e\u64ad\u653e Flash Video \u7684\u6d4f\u89c8\u5668\u7aef\u64ad\u653e\u5668\uff0c\u540e\u6269\u5c55\u4e3a\u53ef\u4ee5\u652f\u6301\u901a\u8fc7 WebSocket \u4f20\u8f93 FLV \u6d41\u64ad\u653e\u3002\u4e0d\u542b\u670d\u52a1\u5668\u7aef\u3002")),(0,r.kt)("h2",{id:"other"},"\u5176\u5b83\u65b9\u6848"),(0,r.kt)("h3",{id:"webrtc-streamer"},(0,r.kt)("a",{parentName:"h3",href:"https://github.com/mpromonet/webrtc-streamer"},"WebRTC-Streamer")),(0,r.kt)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u53ef\u4ee5\u8f6c\u6362\u591a\u79cd\u534f\u8bae\u5230 WebRTC \u6d41\u65b9\u5f0f\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7aef\uff0c\u8fd8\u5185\u7f6e\u4e86 STUN\u3001TURN \u7528\u4e8e\u89e3\u51b3 WebRTC \u7684\u4e00\u7cfb\u5217\u95ee\u9898\u3002"),(0,r.kt)("p",null,"\u793a\u4f8b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="webrtc-streamer.html"',title:'"webrtc-streamer.html"'},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <script src="https://unpkg.com/webrtc-adapter@8.2.3/out/adapter.js"><\/script>\n    <script src="https://unpkg.com/webrtc-streamer@0.8.1/html/webrtcstreamer.js"><\/script>\n  </head>\n  <body>\n    <video id="video" muted></video>\n    <script>\n      var server = new WebRtcStreamer(\'video\', \'http://127.0.0.1:8000\');\n      server.connect(\'rtsp://127.0.0.1:8554/mystream\');\n    <\/script>\n  </body>\n</html>\n')),(0,r.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u5b9e\u65bd\u8d77\u6765\u4e5f\u6bd4\u8f83\u65b9\u4fbf\uff0c\u5c24\u5176\u662f\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u7aef\u81ea\u5b9a RTSP \u6e90\uff0c\u4e5f\u662f\u63a8\u8350\u7684\u65b9\u5f0f\u3002"),(0,r.kt)("p",null,"\u672c\u670d\u52a1\u5668\u7aef\u540c\u6837\u652f\u6301\u6700\u65b0\u7684 WHEP \u534f\u8bae\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u793a\u4f8b\u8fdb\u884c\u8bbf\u95ee\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="webrtc-streamer-whep.html"',title:'"webrtc-streamer-whep.html"'},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <script src="https://unpkg.com/webrtc-adapter@8.2.3/out/adapter.js"><\/script>\n    <script src="https://unpkg.com/@eyevinn/whep-video-component@latest/dist/whep-video.component.js"><\/script>\n  </head>\n  <body>\n    <whep-video\n      src="http://127.0.0.1:8000/api/whep?url=rtsp%3A%2F%2F127.0.0.1%3A8554%2Fmystream"\n      muted\n      autoplay\n    ></whep-video>\n  </body>\n</html>\n')),(0,r.kt)("h2",{id:"conclusion"},"\u603b\u7ed3"),(0,r.kt)("p",null,"\u524d\u9762\u5217\u51fa\u4e86\u5f88\u591a\u65b9\u6848\uff0c\u7efc\u5408\u6765\u770b\uff0cWebRTC \u662f\u5ef6\u8fdf\u4e0a\u6bd4\u8f83\u6709\u4f18\u52bf\u7684\uff0c\u662f\u63a8\u8350\u65b9\u6848\uff0c\u4f46\u5177\u4f53\u5b9e\u73b0\u5404\u6709\u5343\u79cb\u3002WHEP \u4f5c\u4e3a\u6700\u65b0\u6807\u51c6\u4ecd\u5728\u8349\u6848\u9636\u6bb5\uff0c\u6709\u53ef\u80fd\u517c\u5bb9\u6027\u95ee\u9898\u4e0d\u6ee1\u8db3\u9700\u6c42\uff0c\u9700\u8981\u614e\u7528\u3002"))}d.isMDXComponent=!0}}]);